(function(){"use strict";var e={6178:function(e,t,i){var n=i(144),c=i(1096),s=i(9203),r=i(3551),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(c.Z,[t(s.Z,{attrs:{app:"",color:"primary",dark:""}},[t("div",{staticClass:"d-flex align-center"},[t("h1",[e._v("Tuya Server")])])]),t(r.Z,[t("LandingPage")],1)],1)},d=[],a=i(1828),l=i(3058),v=i(5223),u=i(1903),f=i(5057),h=i(248),p=i(1908),y=i(2755),m=i(7833),g=i(1451),D=i(4371),Z=i(5234),_=i(1002),b=i(2370),x=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(u.Z,{staticClass:"mx-auto px-5"},[t(_.Z,[t(b.qW,[t("h3",[e._v("Devices")])]),t(Z.Z),t(a.Z,{attrs:{color:"primary"},on:{click:e.openAddDeviceDialog}},[e._v("Add Devices")])],1),e.devices?.length>0?t(l.Z,{staticClass:"mx-auto px-5"},[t(v.ZB,[t(h.Z,{attrs:{subheader:"","two-line":"",color:"grey lighten-4"}},[t(D.Z,{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.devices,(function(i,n){return t(p.Z,{key:n,attrs:{value:i}},[t(m.Z,[i.isConnected?t(f.Z,{staticClass:"grey lighten-1"},[e._v(" mdi-access-point ")]):t(f.Z,{staticClass:"grey lighten-1"},[e._v(" mdi-access-point-remove ")])],1),t(g.km,[t(g.V9,{staticClass:"text-h6"},[e._v(e._s(i.deviceName))]),t(g.oZ,{domProps:{textContent:e._s(i.deviceId)}})],1),t(y.Z,[t(a.Z,{attrs:{icon:""},on:{click:function(t){return e.connectDevice(i)}}},[t(f.Z,[e._v("mdi-link")])],1)],1),t(y.Z,[t(a.Z,{attrs:{icon:""},on:{click:function(t){return e.disconnectDevice(i)}}},[t(f.Z,[e._v("mdi-link-off")])],1)],1),t(y.Z,[t("SwitchWithStatus",{attrs:{device:i},on:{updateDeviceState:e.updateDeviceState}})],1),t(y.Z,[t(a.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteDevice(i)}}},[t(f.Z,[e._v("mdi-delete")])],1)],1)],1)})),1)],1)],1)],1):e._e(),t("AddDevice",{ref:"addDeviceDialog",on:{save:e.addDevice}})],1)},k=[],T=i(4944),S=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(T.Z,{staticClass:"mx-2",attrs:{color:e.statusColor,outlined:e.isNotUpdated}}),t(a.Z,{attrs:{disabled:!e.device.isConnected},on:{click:function(t){return e.updateDeviceState(!0)}}},[e._v(" ON ")]),t(a.Z,{attrs:{disabled:!e.device.isConnected},on:{click:function(t){return e.updateDeviceState(!1)}}},[e._v(" OFF ")])],1)},C=[],w=n.ZP.extend({name:"SwitchWithStatus",props:{device:Object},data:()=>({}),methods:{updateDeviceState(e){this.$emit("updateDeviceState",this.device,e)}},computed:{statusColor:function(){return void 0!==this.device.state&&this.device.state?"green":"grey"},isNotUpdated:function(){return"CONNECTED"!==this.device.connectionState.value||void 0===this.device.state}}}),O=w,$=i(1001),I=(0,$.Z)(O,S,C,!1,null,null,null),N=I.exports,P=i(5452),E=i(6904),R=i(8059),U=i(5251),j=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(P.Z,{attrs:{"max-width":"600px",persistent:"","no-click-animation":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.close.apply(null,arguments)}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(l.Z,[t(v.EB,[e._v(" "+e._s(e.isUpdate?"Update Device":"Add Device")+" ")]),t(v.ZB,[t(E.Z,{ref:"form"},[t(U.Z,{ref:"deviceName",attrs:{label:"Device Name *",rules:[e.isNonEmptyString]},model:{value:e.device.deviceName,callback:function(t){e.$set(e.device,"deviceName",t)},expression:"device.deviceName"}}),t(R.Z,{ref:"deviceType",attrs:{items:["tuya"],label:"Device Type *",rules:[e.isNonEmptyString]},model:{value:e.device.deviceType,callback:function(t){e.$set(e.device,"deviceType",t)},expression:"device.deviceType"}}),t(U.Z,{ref:"deviceId",attrs:{label:"Device Id *",rules:[e.isNonEmptyString]},model:{value:e.device.deviceId,callback:function(t){e.$set(e.device,"deviceId",t)},expression:"device.deviceId"}}),t(U.Z,{ref:"deviceKey",attrs:{label:"Device Key *",rules:[e.isNonEmptyString]},model:{value:e.device.deviceKey,callback:function(t){e.$set(e.device,"deviceKey",t)},expression:"device.deviceKey"}})],1)],1),t(v.h7,[t(Z.Z),t(a.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.save()}}},[e._v(" "+e._s(e.isUpdate?"Update":"Add")+" ")]),t(a.Z,{attrs:{color:"secondary"},nativeOn:{click:function(t){return e.close()}}},[e._v(" Close ")])],1)],1)],1)},A=[],K=n.ZP.extend({name:"AddDevice",props:{},data:()=>({showDialog:!1,isUpdate:!1,device:{deviceName:"",deviceType:"tuya",deviceId:"",deviceKey:""}}),methods:{close(){this.showDialog=!1,this.resolve(null)},open:function(e,t){return this.showDialog=!0,this.isUpdate=t,this.$nextTick((()=>{this.$refs.form.reset(),e?this.device=Object.assign({},e):(this.device.deviceId="",this.device.deviceType="tuya",this.device.deviceName="",this.device.deviceKey="")})),new Promise(((e,t)=>{this.resolve=e,this.reject=t}))},isNonEmptyString(e){return""!==e},save(){this.$refs.form.validate()&&(this.$emit("save",this.device),this.close())}}}),L=K,B=(0,$.Z)(L,j,A,!1,null,null,null),F=B.exports,W=i(8945);const M=W.Z.create({baseURL:"/api",timeout:5e3});M.interceptors.response.use((function(e){return e}),(function(e){if(!e.response||401!==e.response.status)return Promise.reject(e)}));var q={get:function(e,t,i){let n={};return void 0!==t&&(n={timeout:t}),M.get(e,n).then(i?this._handleResponseRaw:this._handleResponse).catch((e=>this._handleError(e)))},post:function(e,t,i,n,c){let s={};return(i||n||c)&&(s={headers:i?{"Content-Type":i}:void 0,onUploadProgress:c,timeout:n}),M.post(e,t,s).then(this._handleResponse).catch((e=>this._handleError(e)))},put:function(e,t,i,n){let c={};return(i||n)&&(c={headers:i?{"Content-Type":i}:void 0,timeout:n}),M.put(e,t,c).then(this._handleResponse).catch((e=>this._handleError(e)))},delete:function(e,t){return M.delete(e,t).then(this._handleResponse).catch((e=>this._handleError(e)))},_handleResponse:function(e){return e&&e.data?e.data:void 0},_handleResponseRaw:function(e){return e},_handleError:function(e){},getBaseUrl:function(){return M.defaults.baseURL?M.defaults.baseURL:""},setOnAuthRequiredListener:function(e){}},V={test:function(){return q.get("files").then((e=>e)).catch((function(){}))},getDevices:function(){return q.get("device/getAll").then((e=>e)).catch((function(){}))},changeOnState:function(e,t){return t?q.post(`device/on?deviceType=${e.deviceType}&deviceId=${e.deviceId}`):q.post(`device/off?deviceType=${e.deviceType}&deviceId=${e.deviceId}`)},connect:function(e){return q.post(`device/connect?deviceType=${e.deviceType}&deviceId=${e.deviceId}`)},disconnect:function(e){return q.post(`device/disconnect?deviceType=${e.deviceType}&deviceId=${e.deviceId}`)},delete:function(e){return q["delete"](`device/delete?deviceType=${e.deviceType}&deviceId=${e.deviceId}`)},addDevice:function(e){return q.post(`device/add?deviceName=${e.deviceName}&deviceType=${e.deviceType}&deviceId=${e.deviceId}&deviceKey=${e.deviceKey}`)}},z=n.ZP.extend({name:"LandingPage",components:{SwitchWithStatus:N,AddDevice:F},data:()=>({devices:null,selected:null,interval:null}),methods:{isConnected(e){let t=e.connectionState.value;return"CONNECTED"===t},updateDeviceState(e,t){V.changeOnState(e,t).then((()=>{this.refreshDevices()}))},connectDevice(e){V.connect(e).then((()=>{this.refreshDevices()}))},disconnectDevice(e){V.disconnect(e).then((()=>{this.refreshDevices()}))},deleteDevice(e){V["delete"](e).then((()=>{this.refreshDevices()}))},refreshDevices(){V.getDevices().then((e=>{this.devices=e.map((e=>({...e,isConnected:this.isConnected(e)})))}))},openAddDeviceDialog(){this.$refs.addDeviceDialog.open(null,!1).finally((()=>this.refreshDevices()))},addDevice(e){V.addDevice(e).then((()=>{this.refreshDevices()}))}},mounted:function(){this.refreshDevices()},created(){this.interval=setInterval(function(){this.refreshDevices()}.bind(this),5e3)},beforeDestroy(){clearInterval(this.interval),this.interval=null}}),G=z,H=(0,$.Z)(G,x,k,!1,null,null,null),J=H.exports,Q=n.ZP.extend({name:"App",components:{LandingPage:J},data:()=>({})}),X=Q,Y=(0,$.Z)(X,o,d,!1,null,null,null),ee=Y.exports,te=i(2250);n.ZP.use(te.Z,{iconfont:"mdi"});const ie=new te.Z({theme:{themes:{light:{primary:"#fc5603",secondary:"#3D84F5"}}}});var ne=ie;n.ZP.config.productionTip=!1,new n.ZP({vuetify:ne,render:e=>e(ee)}).$mount("#app")}},t={};function i(n){var c=t[n];if(void 0!==c)return c.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,n,c,s){if(!n){var r=1/0;for(l=0;l<e.length;l++){n=e[l][0],c=e[l][1],s=e[l][2];for(var o=!0,d=0;d<n.length;d++)(!1&s||r>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[d])}))?n.splice(d--,1):(o=!1,s<r&&(r=s));if(o){e.splice(l--,1);var a=c();void 0!==a&&(t=a)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[n,c,s]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var c,s,r=n[0],o=n[1],d=n[2],a=0;if(r.some((function(t){return 0!==e[t]}))){for(c in o)i.o(o,c)&&(i.m[c]=o[c]);if(d)var l=d(i)}for(t&&t(n);a<r.length;a++)s=r[a],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(l)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(6178)}));n=i.O(n)})();
//# sourceMappingURL=app.7c738425.js.map